<nz-modal
  [nzVisible]="visible"
  [nzTitle]="editing ? editHead : createHead"
  (nzOnCancel)="onClose()"
  (nzOnOk)="onSubmit()"
  [nzOkText]="editing ? 'Save' : 'Submit'"
>
  <ng-template #editHead>Update your feedback</ng-template>
  <ng-template #createHead>Add new feedback</ng-template>
  <ng-container *nzModalContent>
    <form
      nzLayout="vertical"
      nz-row
      [nzGutter]="[16, 16]"
      nz-form
      [formGroup]="form"
    >
      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-label nzRequired nzFor="feedbackType">
            Add Feedback as
          </nz-form-label>
          <nz-form-control nzErrorTip="Please enter feedback type">
            <nz-select
              [nzLoading]="false"
              [nzShowArrow]="true"
              nz-input
              formControlName="feedbackType"
              id="feedbackType"
            >
              <!-- <nz-option
                *ngFor="let role of roles"
                [nzValue]="role.userId"
                [nzLabel]="role.userName"
              >
              </nz-option> -->
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>

      <div nz-col [nzSpan]="4"></div>
      <div nz-col [nzSpan]="8">
        <nz-form-item>
          <nz-form-label nzRequired nzFor="rating">
            Feedback rating
          </nz-form-label>
          <nz-form-control nzErrorTip="Please enter feedback rating">
            <app-rating-stars formControlName="rating"></app-rating-stars>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col [nzSpan]="24">
        <nz-form-item>
          <nz-form-label nzRequired nzFor="textFeedback">
            Feedback text
          </nz-form-label>
          <nz-form-control [nzErrorTip]="textFeedbackError">
            <nz-textarea-count [nzMaxCharacterCount]="500">
              <!-- placeholder="You can write some description here" -->
              <textarea
                nz-input
                formControlName="textFeedback"
                id="textFeedback"
                rows="4"
                nzAutosize
              ></textarea>
            </nz-textarea-count>
            <ng-template #textFeedbackError let-control>
              <ng-container *ngIf="control.hasError('required')">
                please enter feedback text
              </ng-container>
              <ng-container *ngIf="control.hasError('minlength')">
                min. length is 10 characters
              </ng-container>
              <ng-container *ngIf="control.hasError('maxlength')">
                max. length is 500 characters
              </ng-container>
            </ng-template>
          </nz-form-control>
        </nz-form-item>
      </div>
    </form>
  </ng-container>
</nz-modal>
